!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(n(1));document.addEventListener("DOMContentLoaded",function(){var t=(0,i.default)({$canvas:document.querySelector("#patternLock"),width:300,height:430,grid:[3,3]});t.matchHash("LTExNjI0MjcxOTA=","MTQ2NjgyMjczMw==").onSuccess(function(){return t.setTheme("success")}).onFailure(function(){return t.setTheme("failure")});var e=document.querySelector(".js-password");t.onStart(function(){return t.setTheme("default")}),t.onComplete(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).hash;return e.value=t})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.PatternLock=void 0;var i=c(n(2)),r=n(3),o=n(5),s=c(n(6)),a=c(n(7));function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&h(r,n.prototype),r}).apply(null,arguments)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){v(t,e,n[e])})}return t}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){return new Error("Invalid or empty ".concat(t," passed"))},y={PATTERN_COMPLETE:"complete",PATTERN_START:"start"},g={theme:"default",grid:[3,3],width:300,height:430},m=function(){function t(e){var n=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"destroy",function(){return n._subscriptions.map(function(t){return t()})}),v(this,"emit",function(){var t;return(t=n.eventBus).emit.apply(t,arguments)}),v(this,"onStart",function(t){return n.on(y.PATTERN_START,t)}),v(this,"onComplete",function(t){return n.on(y.PATTERN_COMPLETE,t)}),v(this,"_emitPatternStart",function(){return n.emit(y.PATTERN_START,{})}),v(this,"isSelected",function(t){return!!n.selectedNodes.filter(function(e){return e.row===t.row&&e.col===t.col}).length}),v(this,"_match",function(t){return function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];var o=(0,s.default)(i);return n.onComplete(function(e){return o.check(e[t])}),o}}),v(this,"matchHash",this._match("hash")),!e.$canvas)throw p("$canvas");if(!e.width)throw p("width");if(!e.height)throw p("height");e=d({},g,e),this.dimens={width:e.width,height:e.height},this.setUpCanvas(e),this.initialize(e)}return function(t,e,n){e&&f(t.prototype,e),n&&f(t,n)}(t,[{key:"setUpCanvas",value:function(t){this.$canvas=t.$canvas,this.ctx=this.$canvas.getContext("2d");var e=(0,o.getPixelRatio)(this.ctx);this.$canvas.width=this.dimens.width*e,this.$canvas.height=this.dimens.height*e,this.$canvas.style.width=this.dimens.width+"px",this.$canvas.style.height=this.dimens.height+"px",this.ctx.setTransform(e,0,0,e,0,0)}},{key:"initialize",value:function(t){(0,r.bindContext)(this,["_onTouchStart","_onTouchStop","_onTouchMove","_onResize","renderLoop","calculationLoop"]),this._subscriptions=[],this.eventBus=(0,i.default)(),this.setInitialState(),this._onResize(),this.setTheme(t.theme),this.generateGrid.apply(this,l(t.grid)),this.attachEventHandlers()}},{key:"setInitialState",value:function(){this.coordinates=null,this.selectedNodes=[],this.lastSelectedNode=null}},{key:"forceRender",value:function(){var t=this;(0,o.raf)(function(){var e=t._isDragging;t._isDragging=!0,t.calculationLoop(!1),(0,o.raf)(function(){t.renderLoop(!1),t._isDragging=e})})}},{key:"setTheme",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=a.default.default;if("string"==typeof t&&(t=a.default[t]),!t)throw p("theme");return this.THEME=this.THEME||{},this.THEME.colors=d({},n.colors,t.colors),this.THEME.dimens=d({},n.dimens,t.dimens),e&&this.forceRender(),this.THEME}},{key:"attachEventHandlers",value:function(){var t=this,e=function(e,n,i){return t._subscriptions.push((0,o.registerEvent)(e,n,i))};e(this.$canvas,"mousedown touchstart",this._onTouchStart),e(this.$canvas,"mouseup touchend",this._onTouchStop),e(window,"mousemove touchmove",this._onTouchMove),e(window,"resize",this._onResize),(0,o.raf)(this.renderLoop),(0,o.raf)(this.calculationLoop)}},{key:"on",value:function(t,e){var n=this.eventBus.on(t,e);return this._subscriptions.push(n),n}},{key:"_emitPatternComplete",value:function(){var t=this.selectedNodes,e=(0,r.patternToWords)(t),n=(0,r.hashCode)(e);this.emit(y.PATTERN_COMPLETE,{nodes:t,hash:n})}},{key:"_onResize",value:function(){this.bounds=this.$canvas.getBoundingClientRect()}},{key:"_onTouchStart",value:function(t){t&&t.preventDefault(),this.setInitialState(),this.forceRender(),this._emitPatternStart(),this._isDragging=!0}},{key:"_onTouchStop",value:function(t){t&&t.preventDefault(),this.coordinates=null,this.renderLoop(!1),this._emitPatternComplete(),this._isDragging=!1}},{key:"_onTouchMove",value:function(t){if(t&&t.preventDefault(),this._isDragging){var e={x:t.pageX||t.touches[0].pageX,y:t.pageY||t.touches[0].pageY};e.x-=this.bounds.left,e.y-=this.bounds.top,e.x<=this.dimens.width&&e.x>0&&e.y<=this.dimens.height&&e.y>0?this.coordinates=e:this._onTouchStop()}}},{key:"addIntermediaryNodes",value:function(t){var e=this.getIntermediaryStepDirection(this.lastSelectedNode,t);if(0!==e.row||0!==e.col)for(var n={row:this.lastSelectedNode.row+e.row,col:this.lastSelectedNode.col+e.col},i=Math.max(this.rows,this.cols),r=0;r++<i&&(n.row!==t.row||n.col!==t.col);)this.selectedNodes.push(n),n={row:n.row+e.row,col:n.col+e.col};this.lastSelectedNode=t}},{key:"getIntermediaryStepDirection",value:function(t,e){var n={row:0,col:0};if(!t)return n;var i=Math.abs(t.row-e.row),o=Math.abs(t.col-e.col);if(1===i||1===o)return n;var s=t.row-e.row<0?1:-1,a=t.col-e.col<0?1:-1;if(0===i)0!==o&&(n.col=a);else if(0===o)n.row=s;else{var c=Math.max(i,o),u=Math.min(i,o),h=(0,r.gcd)(c,u);c%u==0&&(n.col=o/h*a,n.row=i/h*s)}return n}},{key:"calculationLoop",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDragging&&this.coordinates&&this.forEachNode(function(e,n){if(Math.sqrt(Math.pow(t.coordinates.x-e,2)+Math.pow(t.coordinates.y-n,2))<t.THEME.dimens.node_radius+1){var i={row:e/t.interval.x,col:n/t.interval.y};if(!t.isSelected(i))return t.addIntermediaryNodes(i),t.selectedNodes.push(i),!1}}),e&&(0,o.raf)(this.calculationLoop)}},{key:"renderLoop",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._isDragging){var n=this.THEME.colors,i=n.accent,r=n.primary;this.ctx.clearRect(0,0,this.dimens.width,this.dimens.height),this.renderGrid();var s=this.selectedNodes.reduce(function(e,n){if(e){var o={x:n.row*t.interval.x,y:n.col*t.interval.y},s={x:e.row*t.interval.x,y:e.col*t.interval.y};t.drawNode(o.x,o.y,i,r,t.THEME.dimens.node_ring+3),t.drawNode(s.x,s.y,i,r,t.THEME.dimens.node_ring+3),t.joinNodes(e.row,e.col,n.row,n.col)}return n},null);s&&this.coordinates&&(this.drawNode(s.row*this.interval.x,s.col*this.interval.y,i,r,this.THEME.dimens.node_ring+6),this.joinNodes(s.row*this.interval.x,s.col*this.interval.y,this.coordinates.x,this.coordinates.y,!0))}e&&(0,o.raf)(this.renderLoop)}},{key:"generateGrid",value:function(t,e){this.rows=t,this.cols=e,this.renderGrid()}},{key:"renderGrid",value:function(){this.ctx.fillStyle=this.THEME.colors.bg,this.ctx.fillRect(0,0,this.dimens.width,this.dimens.height),this.interval={x:this.dimens.width/(this.rows+1),y:this.dimens.height/(this.cols+1)},this.forEachNode(this.drawNode.bind(this))}},{key:"forEachNode",value:function(t){var e=this,n=Array(this.rows).fill(this.interval.x),i=Array(this.cols).fill(this.interval.y),r=new Error("Break Exception");try{i.reduce(function(i,o){return n.reduce(function(e,n){if(!1===t(e,i))throw r;return e+n},e.interval.x),i+o},this.interval.y)}catch(t){if(t!==r)throw t}}},{key:"drawNode",value:function(t,e,n,i,r){this.ctx.lineWidth=r||this.THEME.dimens.node_ring,this.ctx.fillStyle=n||this.THEME.colors.primary,this.ctx.strokeStyle=i||this.THEME.colors.primary,this.ctx.beginPath(),this.ctx.arc(t,e,this.THEME.dimens.node_core,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(t,e,this.THEME.dimens.node_radius,0,2*Math.PI),this.ctx.stroke()}},{key:"joinNodes",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.interval;r&&(o={x:1,y:1});var s={x:o.x*t,y:o.y*e},a={x:o.x*n,y:o.y*i};this.ctx.lineWidth=this.THEME.dimens.line_width,this.ctx.strokeStyle=this.THEME.colors.accent,this.ctx.lineCap="round",this.ctx.beginPath(),this.ctx.moveTo(s.x,s.y),this.ctx.lineTo(a.x,a.y),this.ctx.stroke()}}]),t}();e.PatternLock=m;e.default=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return u(m,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){var t={},e=function(e,n){var i=t[e]=t[e]||[];return i.splice(i.indexOf(n)>>>0,1)};return{on:function(n,i){var r=t[n]=t[n]||[];return r.push(i),e.bind(null,r,i)},off:e,emit:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=t[e];return o&&o.length?o.map(function(t){return t.apply(void 0,i)}):[]}}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.gcd=e.bindContext=e.hashCode=e.patternToWords=void 0;e.patternToWords=function(t){return JSON.stringify(t)};e.hashCode=function(t){if(!t.length)return"";var e=t.split("").reduce(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(t=(t<<5)-t+(arguments.length>1?arguments[1]:void 0).charCodeAt(0))&t});return btoa(e+"")};e.bindContext=function(t,e){return e.forEach(function(e){return t[e]=t[e]&&t[e].bind(t)})};e.gcd=function(t,e){for(;0!==e;){var n=t;t=e,e=n%e}return t}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPixelRatio=e.raf=e.registerEvent=e.unregisterEvent=void 0;var i=function(t,e,n){return e.split(" ").forEach(function(e){return t.removeEventListener(e,n)})};e.unregisterEvent=i;e.registerEvent=function(t,e,n){return e.split(" ").forEach(function(e){return t.addEventListener(e,n)}),function(){return i(t,e,n)}};var r=requestAnimationFrame||function(t){return setTimeout(t,16)};e.raf=r;e.getPixelRatio=function(t){return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){var e=function(){},n=function(){},i={check:function(i){return-1!==t.indexOf(i)?e():n()},onSuccess:function(t){return e=t,i},onFailure:function(t){return n=t,i}};return i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={default:{colors:{accent:"#ae64cd",primary:"#ffffff",bg:"#2c3e50"},dimens:{line_width:6,node_radius:20,node_core:8,node_ring:1}},success:{colors:{accent:"#51e980"}},failure:{colors:{accent:"#e74c3c"}}};e.default=i}]);