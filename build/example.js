!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t:{default:t}}(n(1));document.addEventListener("DOMContentLoaded",function(){var t=(0,i.default)({$canvas:document.querySelector("#patternLock"),width:300,height:430,grid:[3,3]});t.matchHash("LTU2MTIyNjM0Ng==","MTk1OTMwNzY2NQ==").onSuccess(function(){return t.setTheme("success")}).onFailure(function(){return t.setTheme("failure")});var e=document.querySelector(".js-password");t.onStart(function(){return t.setTheme("default")}),t.onComplete(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).hash;return e.value=t})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.PatternLock=void 0;var i=s(n(2)),o=n(3),r=s(n(5));function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&c(o,n.prototype),o}).apply(null,arguments)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){h(t,e,n[e])})}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(t,e,n){return e.forEach(function(e){return t.addEventListener(e,n)})},v=requestAnimationFrame,p=function(t){return new Error("Invalid or empty ".concat(t," passed"))},y="complete",m="start",g={theme:"default",grid:[3,3],width:300,height:430},w=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e.$canvas)throw p("$canvas");e=l({},g,e),this.$canvas=e.$canvas,this.dimens={width:e.width,height:e.height},this.$canvas.width=this.dimens.width,this.$canvas.height=this.dimens.height,this.ctx=this.$canvas.getContext("2d"),this.initialize(e)}return function(t,e,n){e&&d(t.prototype,e),n&&d(t,n)}(t,[{key:"initialize",value:function(t){this._onTouchStart=this._onTouchStart.bind(this),this._onTouchStop=this._onTouchStop.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onResize=this._onResize.bind(this),this.renderLoop=this.renderLoop.bind(this),this.calculationLoop=this.calculationLoop.bind(this),this.initializeEventBus(),this.setTheme(t.theme),this._onResize(),this.setInitialState(),this.generateGrid.apply(this,u(t.grid)),this.attachEventHandlers()}},{key:"setTheme",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=r.default.default;if("string"==typeof t&&(t=r.default[t]),!t)throw p("theme");return this.THEME=this.THEME||{},this.THEME.colors=l({},n.colors,t.colors),this.THEME.dimens=l({},n.dimens,t.dimens),e&&this.forceUpdate(),this.THEME}},{key:"attachEventHandlers",value:function(){f(this.$canvas,["mousedown","touchstart"],this._onTouchStart),f(this.$canvas,["mouseup","touchend"],this._onTouchStop),f(window,["mousemove","touchmove"],this._onTouchMove),f(window,["resize"],this._onResize),v(this.renderLoop),v(this.calculationLoop)}},{key:"initializeEventBus",value:function(){this.eventBus=new i.default}},{key:"on",value:function(t,e){return this.eventBus.on(t,e)}},{key:"off",value:function(t,e){return this.eventBus.off(t,e)}},{key:"emit",value:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return(e=this.eventBus).emit.apply(e,[t].concat(i))}},{key:"onStart",value:function(t){return this.on(m,t),this}},{key:"onComplete",value:function(t){return this.on(y,t),this}},{key:"setInitialState",value:function(){this.coordinates=null,this.selectedNodes=[],this.lastSelectedNode=null}},{key:"onPatternStart",value:function(){this.emit(m,{})}},{key:"onPatternComplete",value:function(){var t=this.selectedNodes.slice(0),e=(0,o.patternToWords)(t),n=(0,o.hashCode)(e);this.emit(y,{nodes:t,hash:n,password:e})}},{key:"_onResize",value:function(){this.bounds=this.$canvas.getBoundingClientRect()}},{key:"_onTouchStart",value:function(t){t&&t.preventDefault(),this.setInitialState(),this.calculationLoop(!1),this.renderLoop(!1),this.onPatternStart(),this._isDragging=!0}},{key:"_onTouchStop",value:function(t){t&&t.preventDefault(),this.coordinates=null,this.renderLoop(!1),this.onPatternComplete(),this._isDragging=!1}},{key:"_onTouchMove",value:function(t){if(t&&t.preventDefault(),this._isDragging){var e={x:t.pageX||t.touches[0].pageX,y:t.pageY||t.touches[0].pageY};e.x-=this.bounds.left,e.y-=this.bounds.top,e.x<=this.dimens.width&&e.x>0&&e.y<=this.dimens.height&&e.y>0?this.coordinates=e:this._onTouchStop()}}},{key:"isSelected",value:function(t){return!!this.selectedNodes.find(function(e){return e.row==t.row&&e.col==t.col})}},{key:"addIntermediaryNodes",value:function(t){var e=this.intermediaryNodesStep(t);if(0!==e.row||0!==e.col)for(var n={row:this.lastSelectedNode.row+e.row,col:this.lastSelectedNode.col+e.col},i=Math.max(this.rows,this.cols),o=0;o++<i&&(n.row!==t.row||n.col!==t.col);)this.selectedNodes.push(n),n={row:n.row+e.row,col:n.col+e.col};this.lastSelectedNode=t}},{key:"intermediaryNodesStep",value:function(t){var e={row:0,col:0};if(!this.lastSelectedNode)return e;var n=Math.abs(this.lastSelectedNode.row-t.row),i=Math.abs(this.lastSelectedNode.col-t.col);if(1===n||1===i)return e;var o=this.lastSelectedNode.row-t.row<0?1:-1,r=this.lastSelectedNode.col-t.col<0?1:-1;if(0===n)0!==i&&(e.col=r);else if(0===i)e.row=o;else{var s=Math.max(n,i),a=Math.min(n,i),c=function(t,e){for(;0!=e;){var n=t;t=e,e=n%e}return t}(s,a);s%a==0&&(e.col=i/c*r,e.row=n/c*o)}return e}},{key:"calculationLoop",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDragging&&this.coordinates&&this.forEachNode(function(e,n){if(Math.sqrt(Math.pow(t.coordinates.x-e,2)+Math.pow(t.coordinates.y-n,2))<t.THEME.dimens.node_radius+1){var i={row:e/t.interval.x,col:n/t.interval.y};if(!t.isSelected(i))return t.addIntermediaryNodes(i),t.selectedNodes.push(i),!1}}),e&&v(this.calculationLoop)}},{key:"forceUpdate",value:function(){var t=this;v(function(){var e=t._isDragging;t._isDragging=!0,t.calculationLoop(!1),v(function(){t.renderLoop(!1),t._isDragging=e})})}},{key:"renderLoop",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._isDragging){var n=this.THEME.colors,i=n.accent,o=n.primary;this.ctx.clearRect(0,0,this.dimens.width,this.dimens.height),this.renderGrid();var r=this.selectedNodes.reduce(function(e,n){if(e){var r={x:n.row*t.interval.x,y:n.col*t.interval.y},s={x:e.row*t.interval.x,y:e.col*t.interval.y};t.drawNode(r.x,r.y,i,o,t.THEME.dimens.node_ring+3),t.drawNode(s.x,s.y,i,o,t.THEME.dimens.node_ring+3),t.joinNodes(e.row,e.col,n.row,n.col)}return n},null);r&&this.coordinates&&(this.drawNode(r.row*this.interval.x,r.col*this.interval.y,i,o,this.THEME.dimens.node_ring+6),this.joinNodes(r.row*this.interval.x,r.col*this.interval.y,this.coordinates.x,this.coordinates.y,!0))}e&&v(this.renderLoop)}},{key:"generateGrid",value:function(t,e){this.rows=t,this.cols=e,this.renderGrid()}},{key:"renderGrid",value:function(){this.ctx.fillStyle=this.THEME.colors.bg,this.ctx.fillRect(0,0,this.dimens.width,this.dimens.height),this.interval={x:this.dimens.width/(this.rows+1),y:this.dimens.height/(this.cols+1)},this.forEachNode(this.drawNode.bind(this))}},{key:"forEachNode",value:function(t){var e=this,n=Array(this.rows).fill(this.interval.x),i=Array(this.cols).fill(this.interval.y),o=new Error("Break Exception");try{i.reduce(function(i,r){return n.reduce(function(e,n){if(!1===t(e,i))throw o;return e+n},e.interval.x),i+r},this.interval.y)}catch(t){if(t!==o)throw t}}},{key:"drawNode",value:function(t,e,n,i,o){this.ctx.lineWidth=o||this.THEME.dimens.node_ring,this.ctx.fillStyle=n||this.THEME.colors.primary,this.ctx.strokeStyle=i||this.THEME.colors.primary,this.ctx.beginPath(),this.ctx.arc(t,e,this.THEME.dimens.node_core,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(t,e,this.THEME.dimens.node_radius,0,2*Math.PI),this.ctx.stroke()}},{key:"joinNodes",value:function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this.interval;o&&(r={x:1,y:1});var s={x:r.x*t,y:r.y*e},a={x:r.x*n,y:r.y*i};this.ctx.lineWidth=this.THEME.dimens.line_width,this.ctx.strokeStyle=this.THEME.colors.accent,this.ctx.lineCap="round",this.ctx.beginPath(),this.ctx.moveTo(s.x,s.y),this.ctx.lineTo(a.x,a.y),this.ctx.stroke()}},{key:"match",value:function(t,e){var n=function(t){var e=function(){},n=function(){},i={check:function(i){return-1!==t.indexOf(i)?e():n()},onSuccess:function(t){return e=t,i},onFailure:function(t){return n=t,i}};return i}(e);return this.on(y,function(e){return n.check(e[t])}),n}},{key:"matchHash",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.match("hash",e)}},{key:"matchPassword",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.match("password",e)}}]),t}();e.PatternLock=w;e.default=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return a(w,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){this.events={}};e.default=i,i.prototype={on:function(t,e){var n=this;return(t=this.events[t]=this.events[t]||[]).push(e),function(){return n.off(t,e)}},off:function(t,e){(t=this.events[t]=this.events[t]||[]).splice(t.indexOf(e)>>>0,1)},emit:function(t){var e=this,n=this.events[t];if(n&&n[0]){var i=n.slice.call(arguments,1);n.slice().map(function(t){return t.apply(e,i)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hashCode=e.patternToWords=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(4));e.patternToWords=function(t){return t.reduce(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return i.default[e.row-1][e.col-1]+t})};e.hashCode=function(t){if(!t.length)return"";var e=t.split("").reduce(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(t=(t<<5)-t+(arguments.length>1?arguments[1]:void 0).charCodeAt(0))&t});return btoa(e+"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=[["lorem","ipsum","dolor","sit","amet"],["fo^$*@!#x","jum[.,]ps","ov#$^er","bri;24dge","dea=-=th"],["fancy","planes","foolish","man","juice"],["nunc","vehicula","lectus","fermentum","suscipit"],["adipiscing","erat","porta","lobortis","ullamcorper"],["lorem","ipsum","dolor","sit","amet"],["fo^$*@!#x","jum[.,]ps","ov#$^er","bri;24dge","dea=-=th"],["fancy","planes","foolish","man","juice"],["nunc","vehicula","lectus","fermentum","suscipit"],["adipiscing","erat","porta","lobortis","ullamcorper"]]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={default:{colors:{accent:"#ae64cd",primary:"#ffffff",bg:"#2c3e50"},dimens:{line_width:6,node_radius:20,node_core:8,node_ring:1}},success:{colors:{accent:"#51e980"}},failure:{colors:{accent:"#e74c3c"}}};e.default=i}]);