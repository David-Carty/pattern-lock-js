!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n(1));document.addEventListener("DOMContentLoaded",function(){var t=(0,r.default)({$canvas:document.querySelector("#patternLock"),width:300,height:430,grid:[3,3]});t.matchHash("LTU2MTIyNjM0Ng==","MTk1OTMwNzY2NQ==").onSuccess(function(){return t.setTheme("success")}).onFailure(function(){return t.setTheme("failure")});var e=document.querySelector(".js-password");t.onStart(function(){return t.setTheme("default")}),t.onComplete(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).hash;return e.value=t})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.PatternLock=void 0;var r=c(n(2)),i=n(3),o=n(5),s=c(n(6)),a=c(n(7));function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){v(t,e,n[e])})}return t}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){return new Error("Invalid or empty ".concat(t," passed"))},y={PATTERN_COMPLETE:"complete",PATTERN_START:"start"},m={theme:"default",grid:[3,3],width:300,height:430},g=function(){function t(e){var n=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"_match",function(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=(0,s.default)(r);return n.on(y.PATTERN_COMPLETE,function(e){return o.check(e[t])}),o}}),v(this,"matchHash",this._match("hash")),v(this,"matchPassword",this._match("password")),!e.$canvas)throw p("$canvas");e=d({},m,e),this.$canvas=e.$canvas,this.dimens={width:e.width,height:e.height},this.$canvas.width=this.dimens.width,this.$canvas.height=this.dimens.height,this.ctx=this.$canvas.getContext("2d"),this.initialize(e)}return function(t,e,n){e&&f(t.prototype,e),n&&f(t,n)}(t,[{key:"initialize",value:function(t){(0,i.bindContext)(this,["_onTouchStart","_onTouchStop","_onTouchMove","_onResize","renderLoop","calculationLoop"]),this._subscriptions=[],this.eventBus=(0,r.default)(),this.setInitialState(),this._onResize(),this.setTheme(t.theme),this.generateGrid.apply(this,h(t.grid)),this.attachEventHandlers()}},{key:"setTheme",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=a.default.default;if("string"==typeof t&&(t=a.default[t]),!t)throw p("theme");return this.THEME=this.THEME||{},this.THEME.colors=d({},n.colors,t.colors),this.THEME.dimens=d({},n.dimens,t.dimens),e&&this.forceUpdate(),this.THEME}},{key:"attachEventHandlers",value:function(){var t=this,e=function(e,n,r){return t._subscriptions.push((0,o.registerEvent)(e,n,r))};e(this.$canvas,"mousedown touchstart",this._onTouchStart),e(this.$canvas,"mouseup touchend",this._onTouchStop),e(window,"mousemove touchmove",this._onTouchMove),e(window,"resize",this._onResize),(0,o.raf)(this.renderLoop),(0,o.raf)(this.calculationLoop)}},{key:"on",value:function(t,e){var n=this.eventBus.on(t,e);return this._subscriptions.push(n),n}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=this.eventBus).emit.apply(e,[t].concat(r))}},{key:"onStart",value:function(t){return this.on(y.PATTERN_START,t),this}},{key:"onComplete",value:function(t){return this.on(y.PATTERN_COMPLETE,t),this}},{key:"setInitialState",value:function(){this.coordinates=null,this.selectedNodes=[],this.lastSelectedNode=null}},{key:"onPatternStart",value:function(){this.emit(y.PATTERN_START,{})}},{key:"onPatternComplete",value:function(){var t=this.selectedNodes.slice(0),e=(0,i.patternToWords)(t),n=(0,i.hashCode)(e);this.emit(y.PATTERN_COMPLETE,{nodes:t,hash:n,password:e})}},{key:"_onResize",value:function(){this.bounds=this.$canvas.getBoundingClientRect()}},{key:"_onTouchStart",value:function(t){t&&t.preventDefault(),this.setInitialState(),this.calculationLoop(!1),this.renderLoop(!1),this.onPatternStart(),this._isDragging=!0}},{key:"_onTouchStop",value:function(t){t&&t.preventDefault(),this.coordinates=null,this.renderLoop(!1),this.onPatternComplete(),this._isDragging=!1}},{key:"_onTouchMove",value:function(t){if(t&&t.preventDefault(),this._isDragging){var e={x:t.pageX||t.touches[0].pageX,y:t.pageY||t.touches[0].pageY};e.x-=this.bounds.left,e.y-=this.bounds.top,e.x<=this.dimens.width&&e.x>0&&e.y<=this.dimens.height&&e.y>0?this.coordinates=e:this._onTouchStop()}}},{key:"isSelected",value:function(t){return!!this.selectedNodes.find(function(e){return e.row==t.row&&e.col==t.col})}},{key:"addIntermediaryNodes",value:function(t){var e=this.intermediaryNodesStep(t);if(0!==e.row||0!==e.col)for(var n={row:this.lastSelectedNode.row+e.row,col:this.lastSelectedNode.col+e.col},r=Math.max(this.rows,this.cols),i=0;i++<r&&(n.row!==t.row||n.col!==t.col);)this.selectedNodes.push(n),n={row:n.row+e.row,col:n.col+e.col};this.lastSelectedNode=t}},{key:"intermediaryNodesStep",value:function(t){var e={row:0,col:0};if(!this.lastSelectedNode)return e;var n=Math.abs(this.lastSelectedNode.row-t.row),r=Math.abs(this.lastSelectedNode.col-t.col);if(1===n||1===r)return e;var o=this.lastSelectedNode.row-t.row<0?1:-1,s=this.lastSelectedNode.col-t.col<0?1:-1;if(0===n)0!==r&&(e.col=s);else if(0===r)e.row=o;else{var a=Math.max(n,r),c=Math.min(n,r),u=(0,i.gcd)(a,c);a%c==0&&(e.col=r/u*s,e.row=n/u*o)}return e}},{key:"calculationLoop",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDragging&&this.coordinates&&this.forEachNode(function(e,n){if(Math.sqrt(Math.pow(t.coordinates.x-e,2)+Math.pow(t.coordinates.y-n,2))<t.THEME.dimens.node_radius+1){var r={row:e/t.interval.x,col:n/t.interval.y};if(!t.isSelected(r))return t.addIntermediaryNodes(r),t.selectedNodes.push(r),!1}}),e&&(0,o.raf)(this.calculationLoop)}},{key:"forceUpdate",value:function(){var t=this;(0,o.raf)(function(){var e=t._isDragging;t._isDragging=!0,t.calculationLoop(!1),(0,o.raf)(function(){t.renderLoop(!1),t._isDragging=e})})}},{key:"renderLoop",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._isDragging){var n=this.THEME.colors,r=n.accent,i=n.primary;this.ctx.clearRect(0,0,this.dimens.width,this.dimens.height),this.renderGrid();var s=this.selectedNodes.reduce(function(e,n){if(e){var o={x:n.row*t.interval.x,y:n.col*t.interval.y},s={x:e.row*t.interval.x,y:e.col*t.interval.y};t.drawNode(o.x,o.y,r,i,t.THEME.dimens.node_ring+3),t.drawNode(s.x,s.y,r,i,t.THEME.dimens.node_ring+3),t.joinNodes(e.row,e.col,n.row,n.col)}return n},null);s&&this.coordinates&&(this.drawNode(s.row*this.interval.x,s.col*this.interval.y,r,i,this.THEME.dimens.node_ring+6),this.joinNodes(s.row*this.interval.x,s.col*this.interval.y,this.coordinates.x,this.coordinates.y,!0))}e&&(0,o.raf)(this.renderLoop)}},{key:"generateGrid",value:function(t,e){this.rows=t,this.cols=e,this.renderGrid()}},{key:"renderGrid",value:function(){this.ctx.fillStyle=this.THEME.colors.bg,this.ctx.fillRect(0,0,this.dimens.width,this.dimens.height),this.interval={x:this.dimens.width/(this.rows+1),y:this.dimens.height/(this.cols+1)},this.forEachNode(this.drawNode.bind(this))}},{key:"forEachNode",value:function(t){var e=this,n=Array(this.rows).fill(this.interval.x),r=Array(this.cols).fill(this.interval.y),i=new Error("Break Exception");try{r.reduce(function(r,o){return n.reduce(function(e,n){if(!1===t(e,r))throw i;return e+n},e.interval.x),r+o},this.interval.y)}catch(t){if(t!==i)throw t}}},{key:"drawNode",value:function(t,e,n,r,i){this.ctx.lineWidth=i||this.THEME.dimens.node_ring,this.ctx.fillStyle=n||this.THEME.colors.primary,this.ctx.strokeStyle=r||this.THEME.colors.primary,this.ctx.beginPath(),this.ctx.arc(t,e,this.THEME.dimens.node_core,0,2*Math.PI),this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(t,e,this.THEME.dimens.node_radius,0,2*Math.PI),this.ctx.stroke()}},{key:"joinNodes",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.interval;i&&(o={x:1,y:1});var s={x:o.x*t,y:o.y*e},a={x:o.x*n,y:o.y*r};this.ctx.lineWidth=this.THEME.dimens.line_width,this.ctx.strokeStyle=this.THEME.colors.accent,this.ctx.lineCap="round",this.ctx.beginPath(),this.ctx.moveTo(s.x,s.y),this.ctx.lineTo(a.x,a.y),this.ctx.stroke()}}]),t}();e.PatternLock=g;e.default=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return u(g,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(){var t={},e=function(e,n){var r=t[e]=t[e]||[];return r.splice(r.indexOf(n)>>>0,1)};return{on:function(n,r){var i=t[n]=t[n]||[];return i.push(r),e.bind(null,i,r)},off:e,emit:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=t[e];return o&&o.length?o.map(function(t){return t.apply(void 0,r)}):[]}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.gcd=e.bindContext=e.hashCode=e.patternToWords=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(4));e.patternToWords=function(t){return t.reduce(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return r.default[e.row-1][e.col-1]+t})};e.hashCode=function(t){if(!t.length)return"";var e=t.split("").reduce(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(t=(t<<5)-t+(arguments.length>1?arguments[1]:void 0).charCodeAt(0))&t});return btoa(e+"")};e.bindContext=function(t,e){return e.forEach(function(e){return t[e]=t[e]&&t[e].bind(t)})};e.gcd=function(t,e){for(;0!=e;){var n=t;t=e,e=n%e}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=[["lorem","ipsum","dolor","sit","amet"],["fo^$*@!#x","jum[.,]ps","ov#$^er","bri;24dge","dea=-=th"],["fancy","planes","foolish","man","juice"],["nunc","vehicula","lectus","fermentum","suscipit"],["adipiscing","erat","porta","lobortis","ullamcorper"],["lorem","ipsum","dolor","sit","amet"],["fo^$*@!#x","jum[.,]ps","ov#$^er","bri;24dge","dea=-=th"],["fancy","planes","foolish","man","juice"],["nunc","vehicula","lectus","fermentum","suscipit"],["adipiscing","erat","porta","lobortis","ullamcorper"]]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.raf=e.registerEvent=e.unregisterEvent=void 0;var r=function(t,e,n){return e.split(" ").forEach(function(e){return t.removeEventListener(e,n)})};e.unregisterEvent=r;e.registerEvent=function(t,e,n){return e.split(" ").forEach(function(e){return t.addEventListener(e,n)}),function(){return r(t,e,n)}};var i=requestAnimationFrame||function(t){return setTimeout(t,16)};e.raf=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t){var e=function(){},n=function(){},r={check:function(r){return-1!==t.indexOf(r)?e():n()},onSuccess:function(t){return e=t,r},onFailure:function(t){return n=t,r}};return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={default:{colors:{accent:"#ae64cd",primary:"#ffffff",bg:"#2c3e50"},dimens:{line_width:6,node_radius:20,node_core:8,node_ring:1}},success:{colors:{accent:"#51e980"}},failure:{colors:{accent:"#e74c3c"}}};e.default=r}]);